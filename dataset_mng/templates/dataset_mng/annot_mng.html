<button onclick="window.location.href = '/dataset_mng';">To dataset management</button>
<br/>
<div>
    Image folder:
    <select id="slct_img_folder" onchange="show_images()">
    {% for img_folder in img_folder_list %}
        <option val="{{ img_folder }}">{{ img_folder }}</option>
    {% endfor %}
    </select>
    <div id="images_selection"></div>
</div>
<script>
function show_images() {
    slct = document.getElementById('slct_img_folder');
    folder = slct.options[slct.selectedIndex].value;
    //alert(folder);
    var ajaxRequest = new XMLHttpRequest();
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            //the request is completed, now check its status
            if(ajaxRequest.status == 200){
                //document.getElementById("images_selection").innerHTML = ajaxRequest.responseText;
                response = JSON.parse(ajaxRequest.responseText);
                console.log(response.file_list);
                div_img_slct = document.getElementById("images_selection");
                for (i=0;i<response.file_list.length;i++) {
                    var checkbox = document.createElement('input');
                    checkbox.type = "checkbox";
                    checkbox.name = response.file_list[i].name;
                    checkbox.value = response.file_list[i].name;
                    checkbox.id = "img_"+response.file_list[i].name;

                    var img = document.createElement('img');
                    img.src = "/"+response.file_list[i].path;
                    img.width = 64;

                    div_img_slct.appendChild(checkbox);
                    div_img_slct.appendChild(img);
                }
            }
            else{
                console.log("Status error: " + ajaxRequest.status);
            }
        }
        else{
            console.log("Ignored readyState: " + ajaxRequest.readyState);
        }
    }
    ajaxRequest.open("GET", "/image_mng/images?folder="+folder, true);
    ajaxRequest.send();
}
</script>